<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>í•˜ë£¨ ìƒì‚°ì„± ì²´í¬ í…ŒìŠ¤íŠ¸</title>

    <!-- âœ… Favicon (AUTO / ê¸°ë³¸ì…‹) -->
    <link
      rel="icon"
      type="image/svg+xml"
      href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' rx='18' fill='%230f172a'/%3E%3Ctext x='50' y='62' font-size='52' text-anchor='middle' fill='white'%3EğŸ§ %3C/text%3E%3C/svg%3E"
    />

    <!-- SEO / OG -->
    <meta
      name="description"
      content="1ë¶„ ë§Œì— ì˜¤ëŠ˜ì˜ ì§‘ì¤‘Â·ì—ë„ˆì§€Â·ì˜ì‚¬ê²°ì • ìƒíƒœë¥¼ ì²´í¬í•˜ê³  ì¶”ì²œ í–‰ë™ 3ê°€ì§€ë¥¼ ë°›ì•„ë³´ì„¸ìš”."
    />
    <meta property="og:title" content="í•˜ë£¨ ìƒì‚°ì„± ì²´í¬ í…ŒìŠ¤íŠ¸" />
    <meta
      property="og:description"
      content="ì˜¤ëŠ˜ ë‚´ ë‡ŒÂ·ì—ë„ˆì§€Â·ì§‘ì¤‘ ìƒíƒœëŠ”? 1ë¶„ ì²´í¬ë¡œ ë°”ë¡œ ì§„ë‹¨"
    />
    <meta
      property="og:image"
      content="https://dummyimage.com/1200x630/0f172a/ffffff&text=Daily+Productivity+Check"
    />
    <meta property="og:type" content="website" />
    <meta name="twitter:card" content="summary_large_image" />

    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      :root {
        color-scheme: light;
      }
      .fade-in {
        animation: fadeIn 0.22s ease-out both;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(6px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
    </style>
  </head>

  <body class="bg-slate-50 text-slate-900">
    <main class="min-h-screen px-4 py-8 sm:py-10">
      <div class="mx-auto max-w-xl">
        <header class="mb-6">
          <p class="text-sm text-slate-500">1ë¶„ ì²´í¬</p>
          <h1 class="text-2xl font-extrabold tracking-tight">
            í•˜ë£¨ ìƒì‚°ì„± ì²´í¬ í…ŒìŠ¤íŠ¸
          </h1>
          <p class="mt-2 text-sm text-slate-600">
            ì˜¤ëŠ˜ ë‚´ ì§‘ì¤‘/ì—ë„ˆì§€/ì˜ì‚¬ê²°ì • ìƒíƒœë¥¼ ë¹ ë¥´ê²Œ í™•ì¸í•´ìš”.
          </p>
        </header>

        <!-- Card -->
        <section
          class="rounded-3xl bg-white p-5 shadow-sm border border-slate-200"
        >
          <div class="flex items-center justify-between gap-3">
            <div class="text-xs text-slate-500">
              <span id="stepText">1</span> / <span id="totalText">8</span>
            </div>
            <button
              id="resetBtn"
              class="text-xs font-semibold text-slate-500 hover:text-slate-900"
            >
              ì´ˆê¸°í™”
            </button>
          </div>

          <div
            class="mt-3 h-2 w-full rounded-full bg-slate-100 overflow-hidden"
          >
            <div
              id="progBar"
              class="h-full rounded-full bg-slate-900 transition-all"
              style="width: 12.5%"
            ></div>
          </div>

          <div id="qWrap" class="fade-in mt-5">
            <h2 id="qTitle" class="text-lg font-extrabold leading-snug">
              ì˜¤ëŠ˜ í•´ì•¼ í•  ì¼ì„ ë– ì˜¬ë¦¬ë©´?
            </h2>
            <p id="qHint" class="mt-2 text-sm text-slate-500">
              ì§€ê¸ˆ â€˜ì˜¤ëŠ˜ ê¸°ì¤€â€™ìœ¼ë¡œ ë‹µí•´ì¤˜.
            </p>

            <div id="opts" class="mt-4 space-y-2">
              <!-- injected -->
            </div>

            <div class="mt-5 flex items-center justify-between">
              <button
                id="backBtn"
                class="rounded-2xl border border-slate-200 bg-white px-4 py-3 text-sm font-semibold shadow-sm hover:shadow disabled:opacity-40 disabled:hover:shadow-none"
                disabled
              >
                ì´ì „
              </button>

              <div class="text-xs text-slate-500">â­•3 / â—¯2 / â–³1 / âœ•0</div>
            </div>
          </div>
        </section>

        <footer class="mt-8 text-center text-xs text-slate-400">
          <p>
            ê²°ê³¼ëŠ” ì°¸ê³ ìš©ì´ë©°, ì»¨ë””ì…˜Â·ìˆ˜ë©´Â·ìŠ¤íŠ¸ë ˆìŠ¤ì— ë”°ë¼ ë‹¬ë¼ì§ˆ ìˆ˜ ìˆì–´ìš”.
          </p>

          <!-- âœ… í•˜ë‹¨ ê³µí†µ ë²„íŠ¼ (ê¸°ë³¸ì…‹) -->
          <button
            id="more-tests-btn"
            type="button"
            data-url="https://funnyfunny.cloud/"
            class="w-full py-4 bg-white border border-purple-100 text-purple-700 font-semibold rounded-xl hover:bg-purple-50 hover:border-purple-200 transition-all duration-200 mt-4"
          >
            ë” ë§ì€ í…ŒìŠ¤íŠ¸ í•´ë³´ê¸°
          </button>
        </footer>
      </div>
    </main>

    <script>
      const QUESTIONS = [
        {
          title: "ì˜¤ëŠ˜ í•´ì•¼ í•  ì¼ì„ ë– ì˜¬ë¦¬ë©´?",
          hint: "ì§€ê¸ˆ â€˜ì˜¤ëŠ˜ ê¸°ì¤€â€™ìœ¼ë¡œ ë‹µí•´ì¤˜.",
          options: [
            { label: "â­• ë°”ë¡œ ì†ì´ ê°„ë‹¤", score: 3 },
            { label: "â—¯ ë¯¸ë£¨ê³  ì‹¶ì§€ë§Œ í•˜ê¸´ í•œë‹¤", score: 2 },
            { label: "â–³ ìƒê°ë§Œ í•´ë„ í”¼ê³¤í•˜ë‹¤", score: 1 },
            { label: "âœ• ì•„ì˜ˆ ì‹œì‘í•  ë§ˆìŒì´ ì—†ë‹¤", score: 0 },
          ],
        },
        {
          title: "ì˜¤ëŠ˜ ì§‘ì¤‘ì´ ëŠê¸°ëŠ” ì£¼ëœ ì´ìœ ëŠ”?",
          hint: "ê°€ì¥ í° ì›ì¸ 1ê°œë§Œ ê³ ë¥´ê¸°.",
          options: [
            { label: "â­• ì™¸ë¶€ ë°©í•´ ê±°ì˜ ì—†ìŒ", score: 3 },
            { label: "â—¯ ì•Œë¦¼Â·SNS", score: 2 },
            { label: "â–³ í”¼ë¡œÂ·ì¡¸ë¦¼", score: 1 },
            { label: "âœ• ì¡ìƒê°ì´ ë©ˆì¶”ì§€ ì•ŠìŒ", score: 0 },
          ],
        },
        {
          title: "ì˜¤ëŠ˜ ê°€ì¥ ë§ì´ í•œ í–‰ë™ì€?",
          hint: "ì˜¤ëŠ˜ ì‹¤ì œë¡œ ê°€ì¥ ë§ì´ í•œ ê²ƒ.",
          options: [
            { label: "â­• í•µì‹¬ ì—…ë¬´", score: 3 },
            { label: "â—¯ ì •ë¦¬Â·ë³´ì¡° ì—…ë¬´", score: 2 },
            { label: "â–³ ì˜ë¯¸ ì—†ëŠ” ì›¹ì„œí•‘", score: 1 },
            { label: "âœ• í•´ì•¼ í•  ê±¸ í”¼í•˜ëŠ” í–‰ë™", score: 0 },
          ],
        },
        {
          title: "ì˜¤ëŠ˜ ì—ë„ˆì§€ ë ˆë²¨ì€?",
          hint: "í•˜ë£¨ ì „ì²´ ì²´ê° ê¸°ì¤€.",
          options: [
            { label: "â­• ì—¬ìœ  ìˆìŒ", score: 3 },
            { label: "â—¯ ë³´í†µ", score: 2 },
            { label: "â–³ ë¹¨ë¦¬ ì†Œì§„ë¨", score: 1 },
            { label: "âœ• ì´ë¯¸ ë°©ì „ ìƒíƒœ", score: 0 },
          ],
        },
        {
          title: "ì˜¤ëŠ˜ ê²°ì •ì„ ë‚´ë¦¬ëŠ” ê²Œ ì–´ë• ë‚˜?",
          hint: "ì‚¬ì†Œí•œ ê²°ì • í¬í•¨.",
          options: [
            { label: "â­• ë¹ ë¥´ê³  ëª…í™•", score: 3 },
            { label: "â—¯ ê³ ë¯¼ì€ ìˆì—ˆìŒ", score: 2 },
            { label: "â–³ ì‚¬ì†Œí•œ ê²ƒë„ ì˜¤ë˜ ê³ ë¯¼", score: 1 },
            { label: "âœ• ê²°ì • ìì²´ë¥¼ í”¼í•¨", score: 0 },
          ],
        },
        {
          title: "ì˜¤ëŠ˜ ìƒì‚°ì„±ì„ ë°©í•´í•œ ê°€ì¥ í° ìš”ì†ŒëŠ”?",
          hint: "ê°€ì¥ í¬ê²Œ ì²´ê°ëœ 1ê°œ.",
          options: [
            { label: "â­• ì—†ìŒ", score: 3 },
            { label: "â—¯ ì¼ì • ê³¼ë‹¤", score: 2 },
            { label: "â–³ ê°ì • ì†Œëª¨", score: 1 },
            { label: "âœ• ìˆ˜ë©´Â·ì»¨ë””ì…˜ ë¬¸ì œ", score: 0 },
          ],
        },
        {
          title: "ì§€ê¸ˆ ì´ í…ŒìŠ¤íŠ¸ë¥¼ í•˜ëŠ” ì´ìœ ëŠ”?",
          hint: "ì˜¤ëŠ˜ì˜ â€˜ì‹¬ë¦¬ ìƒíƒœâ€™ì— ê°€ê¹Œìš´ ë‹µ.",
          options: [
            { label: "â­• ì˜¤ëŠ˜ ì ê²€ìš©", score: 3 },
            { label: "â—¯ ìƒì‚°ì„± íšŒë³µìš©", score: 2 },
            { label: "â–³ ì£„ì±…ê° í•´ì†Œìš©", score: 1 },
            { label: "âœ• ì•„ë¬´ê²ƒë„ í•˜ê¸° ì‹«ì–´ì„œ", score: 0 },
          ],
        },
        {
          title: "ì˜¤ëŠ˜ í•˜ë£¨ë¥¼ í•œ ë¬¸ì¥ìœ¼ë¡œ í‘œí˜„í•˜ë©´?",
          hint: "ê°€ì¥ ê°€ê¹Œìš´ ëŠë‚Œ.",
          options: [
            { label: "â­• ì˜ êµ´ëŸ¬ê°”ë‹¤", score: 3 },
            { label: "â—¯ ê·¸ëŸ­ì €ëŸ­", score: 2 },
            { label: "â–³ ë¹„íš¨ìœ¨ì ì´ì—ˆë‹¤", score: 1 },
            { label: "âœ• ì‚­ì œí•˜ê³  ì‹¶ë‹¤", score: 0 },
          ],
        },
      ];

      const KEY = "prod_answers_v1";

      const els = {
        stepText: document.getElementById("stepText"),
        totalText: document.getElementById("totalText"),
        progBar: document.getElementById("progBar"),
        qWrap: document.getElementById("qWrap"),
        qTitle: document.getElementById("qTitle"),
        qHint: document.getElementById("qHint"),
        opts: document.getElementById("opts"),
        backBtn: document.getElementById("backBtn"),
        resetBtn: document.getElementById("resetBtn"),
      };

      let state = loadState();

      function loadState() {
        try {
          const raw = localStorage.getItem(KEY);
          if (!raw) return { idx: 0, scores: [] };
          const parsed = JSON.parse(raw);
          if (
            !parsed ||
            typeof parsed.idx !== "number" ||
            !Array.isArray(parsed.scores)
          ) {
            return { idx: 0, scores: [] };
          }
          return parsed;
        } catch {
          return { idx: 0, scores: [] };
        }
      }

      function saveState() {
        localStorage.setItem(KEY, JSON.stringify(state));
      }

      function resetAll() {
        state = { idx: 0, scores: [] };
        localStorage.removeItem(KEY);
        localStorage.removeItem("prod_score");
        render();
      }

      function render() {
        const total = QUESTIONS.length;
        const idx = state.idx;

        els.totalText.textContent = total;
        els.stepText.textContent = Math.min(idx + 1, total);

        const pct = Math.round((idx / total) * 100);
        els.progBar.style.width = Math.max(8, pct) + "%";

        els.backBtn.disabled = idx === 0;

        const q = QUESTIONS[idx];
        els.qTitle.textContent = q.title;
        els.qHint.textContent = q.hint || "";

        els.opts.innerHTML = q.options
          .map((opt, i) => {
            return `
          <button
            type="button"
            data-score="${opt.score}"
            class="w-full text-left rounded-2xl border border-slate-200 bg-white px-4 py-4 text-sm font-semibold shadow-sm hover:shadow transition active:scale-[0.99]">
            ${escapeHtml(opt.label)}
          </button>
        `;
          })
          .join("");

        // re-attach
        els.opts.querySelectorAll("button[data-score]").forEach((btn) => {
          btn.addEventListener("click", () => {
            const score = parseInt(btn.dataset.score, 10) || 0;
            answer(score);
          });
        });

        els.qWrap.classList.remove("fade-in");
        void els.qWrap.offsetWidth;
        els.qWrap.classList.add("fade-in");
      }

      function answer(score) {
        state.scores[state.idx] = score;
        state.idx += 1;
        saveState();

        if (state.idx >= QUESTIONS.length) {
          const total = state.scores.reduce((a, b) => a + (b || 0), 0);
          localStorage.setItem("prod_score", String(total));
          location.href = `./result.html?score=${total}`;
          return;
        }
        render();
      }

      function back() {
        if (state.idx <= 0) return;
        state.idx -= 1;
        saveState();
        render();
      }

      function escapeHtml(str) {
        return String(str)
          .replaceAll("&", "&amp;")
          .replaceAll("<", "&lt;")
          .replaceAll(">", "&gt;")
          .replaceAll('"', "&quot;")
          .replaceAll("'", "&#039;");
      }

      // events
      els.backBtn.addEventListener("click", back);
      els.resetBtn.addEventListener("click", resetAll);

      // âœ… í•˜ë‹¨ ê³µí†µ ë²„íŠ¼
      document
        .getElementById("more-tests-btn")
        ?.addEventListener("click", (e) => {
          const url = e.currentTarget.dataset.url;
          if (url) window.open(url, "_blank", "noopener,noreferrer");
        });

      render();
    </script>
  </body>
</html>
